

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Métodos &mdash; API Documento Técnico 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="API Documento Técnico 1.0.0 documentation" href="../index.html"/>
        <link rel="prev" title="2. Recursos" href="section-02-recursos.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> API Documento Técnico
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="section-01-autorizacion.html">1. Autorización</a></li>
<li class="toctree-l1"><a class="reference internal" href="section-02-recursos.html">2. Recursos</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">3. Métodos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#get-listados">GET Listados</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get">GET</a></li>
<li class="toctree-l2"><a class="reference internal" href="#post-put-patch">POST / PUT / PATCH</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#datasets">Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#datastreams">Datastreams</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#estructura-json">Estructura JSON</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modificar-el-formato-de-salida">Modificar el formato de salida</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">API Documento Técnico</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>3. Métodos</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/_sections/section-03-metodos.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="metodos">
<h1>3. Métodos<a class="headerlink" href="#metodos" title="Permalink to this headline">¶</a></h1>
<div class="section" id="get-listados">
<h2>GET Listados<a class="headerlink" href="#get-listados" title="Permalink to this headline">¶</a></h2>
<p>Busca un litado de recursos</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">GET</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">resources</span>
</pre></div>
</div>
<p>Busca un listado de datastreams.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">GET</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">datastreams</span>
</pre></div>
</div>
<p>Busca un listado de datasets.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">GET</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">datasets</span>
</pre></div>
</div>
<p>Busca un listado de visualizaciones.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">GET</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">visualizations</span>
</pre></div>
</div>
<p>Si no hay parametros GET la API devuelve todos los recursos que le corresponden a la cuenta y sino se pueden pasar los siguientes parametros para ordenar o filtrar la búsqueda.</p>
<ul class="simple">
<li>query: texto que se busca en todos los parametros del datastream</li>
<li>offset: a partir de que datastream traer el resultado (se usa para paginar)</li>
<li>limit: junto con offset se usa para limitar la cantidad de resultados</li>
<li>order: pudiendo ser su valor top, viewed, downloaded o last y ordenando el resultado según esos criterios.</li>
<li>categories: listado de los nombres de categorias separados por coma</li>
<li>resources: listado de recursos (Ej. &#8220;dt,ds,vz&#8221;)</li>
</ul>
<p>Cuando se aplican limites a las busquedas el resultado se devuelve encapsulando los objetos en otros paramteros.</p>
<ul class="simple">
<li>count: el total de los resultados si no hubiera paginado</li>
<li>next: un link a la próxima petición de la api según el paginado</li>
<li>previous: un lina a la previa petición de la api según el paginado</li>
<li>result: un array con el resultado final</li>
</ul>
<p>Un ejemplo de resultados con limit igual a 2 sería asi</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
  <span class="s">&quot;count&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="s">&quot;next&quot;</span><span class="p">:</span> <span class="s">&quot;http://api.dev:8080/api/v2/datasets/?auth_key=576bba0dd5a27df9aaac12d1d7ec25c8411fe29e&amp;limit=2&amp;offset=2&quot;</span><span class="p">,</span>
  <span class="s">&quot;previous&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="s">&quot;endpoint&quot;</span><span class="p">:</span> <span class="s">&quot;http://datastorage.mineduc.cl/tablas/Nivel_Calificaciones_anio_2006.csv&quot;</span><span class="p">,</span>
          <span class="s">&quot;description&quot;</span><span class="p">:</span> <span class="s">&quot;Descripcion del conjuto de datos&quot;</span><span class="p">,</span>
          <span class="s">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">[],</span>
          <span class="s">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="s">&quot;&quot;</span>
          <span class="p">],</span>
          <span class="s">&quot;created_at&quot;</span><span class="p">:</span> <span class="mi">1337611920</span><span class="p">,</span>
          <span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="s">&quot;Nivel de Calificaciones 2006&quot;</span><span class="p">,</span>
          <span class="s">&quot;link&quot;</span><span class="p">:</span> <span class="s">&quot;http://microsites.dev:8080/datasets/61649/nivel-de-calificaciones-2006&quot;</span><span class="p">,</span>
          <span class="s">&quot;user&quot;</span><span class="p">:</span> <span class="s">&quot;publicador&quot;</span><span class="p">,</span>
          <span class="s">&quot;guid&quot;</span><span class="p">:</span> <span class="s">&quot;DATASET-ID-61649&quot;</span><span class="p">,</span>
          <span class="s">&quot;category_name&quot;</span><span class="p">:</span> <span class="s">&quot;Educación&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
          <span class="s">&quot;endpoint&quot;</span><span class="p">:</span> <span class="s">&quot;http://datastorage.mineduc.cl/tablas/Nivel_Rendimiento_anio_2010.csv&quot;</span><span class="p">,</span>
          <span class="s">&quot;description&quot;</span><span class="p">:</span> <span class="s">&quot;Descripcion del conjuto de datos&quot;</span><span class="p">,</span>
          <span class="s">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">[],</span>
          <span class="s">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="s">&quot;&quot;</span>
          <span class="p">],</span>
          <span class="s">&quot;created_at&quot;</span><span class="p">:</span> <span class="mi">1337611453</span><span class="p">,</span>
          <span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="s">&quot;Nivel de Rendimiento 2010&quot;</span><span class="p">,</span>
          <span class="s">&quot;link&quot;</span><span class="p">:</span> <span class="s">&quot;http://microsites.dev:8080/datasets/61648/nivel-de-rendimiento-2010&quot;</span><span class="p">,</span>
          <span class="s">&quot;user&quot;</span><span class="p">:</span> <span class="s">&quot;publicador&quot;</span><span class="p">,</span>
          <span class="s">&quot;guid&quot;</span><span class="p">:</span> <span class="s">&quot;DATASET-ID-61648&quot;</span><span class="p">,</span>
          <span class="s">&quot;category_name&quot;</span><span class="p">:</span> <span class="s">&quot;Educación&quot;</span>
      <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="get">
<h2>GET<a class="headerlink" href="#get" title="Permalink to this headline">¶</a></h2>
<p>Trae la información asociada a una vista</p>
<div class="highlight-python"><div class="highlight"><pre>GET /api/v2/datastreams/:guid
</pre></div>
</div>
<p>Trae la información asociada completa (incluye los valores de la vista) a una vista</p>
<div class="highlight-python"><div class="highlight"><pre>GET /api/v2/datastreams/:guid/data
</pre></div>
</div>
<p>Trae la información asociada a un dataset</p>
<div class="highlight-python"><div class="highlight"><pre>GET /api/v2/datasets/:guid
</pre></div>
</div>
<p>Trae la información asociada a una visualización</p>
<div class="highlight-python"><div class="highlight"><pre>GET /api/v2/visualizations/:guid
</pre></div>
</div>
<p>Un ejemplo de resultado de un datastream sería así</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
  <span class="s">&quot;endpoint&quot;</span><span class="p">:</span> <span class="s">&quot;http://datastorage.mineduc.cl/tablas/Nivel_Calificaciones_anio_2006.csv&quot;</span><span class="p">,</span>
  <span class="s">&quot;description&quot;</span><span class="p">:</span> <span class="s">&quot;Contiene indicadores para promedio anual de calificaciones (para Enseñanza Básica de Niños y Enseñanza Media de Jóvenes).&quot;</span><span class="p">,</span>
  <span class="s">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s">&quot;created_at&quot;</span><span class="p">:</span> <span class="s">&quot;2012-06-04T14:12:52&quot;</span><span class="p">,</span>
  <span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="s">&quot;Nivel Calificaciones 2006&quot;</span><span class="p">,</span>
  <span class="s">&quot;link&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s">&quot;user&quot;</span><span class="p">:</span> <span class="s">&quot;publicador&quot;</span><span class="p">,</span>
  <span class="s">&quot;guid&quot;</span><span class="p">:</span> <span class="s">&quot;NIVEL-DE-CALIF-2006-53010&quot;</span><span class="p">,</span>
  <span class="s">&quot;category_name&quot;</span><span class="p">:</span> <span class="s">&quot;Educación&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="post-put-patch">
<h2>POST / PUT / PATCH<a class="headerlink" href="#post-put-patch" title="Permalink to this headline">¶</a></h2>
<p>Creación, Edición y Edición Parcial de recursos.</p>
<p>Al momento solo podemos crear y editar datasets y vistas. Y para poder hacerlo hay que tener acceso a una clave privada que esté asociada a un usuario.</p>
<p>Por lo tanto la operación de edición y creación se realiza sobre las últimas revisiones de los recursos y no sobre laas últimas revisiones publicadas de los mismos.</p>
<div class="section" id="datasets">
<h3>Datasets<a class="headerlink" href="#datasets" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>POST /api/v2/datasets

PUT/PATCH /api/v2/datasets/:guid
</pre></div>
</div>
<ul class="simple">
<li>title: Título del conjunto de datos</li>
<li>description: Descripción del conjunto de datos</li>
<li>category: Slug de la categoría para clasificar los recursos. Debe coincidir con alguna de las categorías de la cuenta</li>
<li>notes: Opcional. Texto de la nota del conjunto de datos</li>
<li>end_point: Opcional. Url apuntando al recurso con los datos (archivos o página web).</li>
<li>file: Opcional. Archivo a subir a la plataforma</li>
<li>license: Opcional. Tipo de licencia que aplica sobre el conjunto de datos</li>
<li>spatial: Opcional. Zona geográfica a la cual aplica el conjunto de datos</li>
<li>frequency: Opcional. Tipo de licencia que aplica sobre el conjunto de datos</li>
<li>mbox: Opcional. Correo electronico de quien administra el conjunto de datos</li>
<li>tags: Opcional. Tags separados por coma.</li>
</ul>
</div>
<div class="section" id="datastreams">
<h3>Datastreams<a class="headerlink" href="#datastreams" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">POST</span> <span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">datastreams</span>
</pre></div>
</div>
<ul class="simple">
<li>title: Título del conjunto de datos</li>
<li>description: Descripción del conjunto de datos</li>
<li>category: Slug de la categoría para clasificar los recursos. Debe coincidir con alguna de las categorías de la cuenta</li>
<li>notes: Opcional. Texto de la nota del conjunto de datos</li>
<li>table_id: Opcional. Indice de la tabla en el conjunto de datos, comenzando de cero.</li>
<li>header_row: Opcional. Indice de la fila a usar como cabecera de la tabla comenzando de cero. Por defecto es vacio</li>
<li>dataset: GUID del conjunto de datos asociado a la vista</li>
<li>tags: Opcional. Tags separados por coma.</li>
</ul>
<p>Ejemplo de llamada para crear un datastream</p>
<div class="highlight-python"><div class="highlight"><pre>curl -H &#39;Accept: application/json; indent=4&#39; -H &quot;Content-Type: application/json&quot; -X POST -d @api/tests/datastream-ok.json &quot;http://api.dev:8080/api/v2/datastreams.json?auth_key=576bba0dd5a27df9aaac12d1d7ec25c8411fe29e&quot;
</pre></div>
</div>
</div>
</div>
<div class="section" id="estructura-json">
<h2>Estructura JSON<a class="headerlink" href="#estructura-json" title="Permalink to this headline">¶</a></h2>
<p>El resultado es un objeto Argument, el cual es una estructura recursiva de datos que contiene las siguientes propiedades:</p>
<p>fType: Indica el tipo de dato del Argument. Sus valores pueden ser ARRAY | TEXT | NUMBER | DATE. El tipo ARRAY indica que el argumento contiene una TABLA.</p>
<p>Cuando el tipo de datos es un ARRAY fRows y fCols indican el número de filas y columnas de la TABLA. De la misma manera, fArray contiene los datos de la TABLA como un arreglo de objetos Argument.</p>
<p>Cuando el tipo de datos es TEXT el valor está contenido en fStr. Para un tipo de dato NUMBER el valor esta contenido en fNum. Para un tipo de dato DATE el valor está contenido en fNum como epoch time.</p>
<p>Un Argument puede contener un enlace LINK. En esos casos, fType contiene LINK, la uri correspondiente viene en fUri y el texto a mostrar está contenido en fStr.</p>
<p>Cuando el tipo de datos es ERROR, ocurrió un error al ejecutar la vista de datos. El mensaje de error estará contenido en fStr.</p>
<p>Cuando un error ocurre, el resultado es reemplazado con el último resultado que fue ejecutado correctamente.</p>
<p>Para reconocer si el resultado está actualizado, existe una propiedad adicional llamada fTimestamp. Contiene el tiempo POSIX de cuando fue ejecutada exitosamente por última vez. Si fTimestamp tiene un valor igual a 0, significa que el resultado fue obtenido en ese instante.</p>
<div class="section" id="modificar-el-formato-de-salida">
<h3>Modificar el formato de salida<a class="headerlink" href="#modificar-el-formato-de-salida" title="Permalink to this headline">¶</a></h3>
<p>Puede modificarse el formato de salida de la API cambiando la extensión del argumento data en la llamada realizada al recurso. Por defecto el argumento data es llamado como data.json, lo que trae un objeto JSON con la estructura anterior. Otros formatos posibles son:</p>
<ul class="simple">
<li>data.ajson : Trae los datos como un array json.</li>
<li>data.xml : Trae los datos como una estructura XML</li>
<li>data.csv : Trae los datos como un documento CSV</li>
<li>data.xls : Trae una url dentro de un json para redireccionar hacia un documento XLS</li>
</ul>
<p>Nuevos tipos de salida se irán incluyendo con el tiempo.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="section-02-recursos.html" class="btn btn-neutral" title="2. Recursos" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Junar.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>